# 추리 수사 게임〈The Room of Lies〉
- Runpod에서 ollama EEVE 모델을 사용한 게임 만들기

## 게임 기획
### 주제
용의자 및 증인과의 대화를 통해 범인을 특정하는 추리 수사 게임

### 역할
- AI
    - 사건 파일 생성
    - 증인
    - 범인(4명)
- 플레이어
    - 프로파일러

### 주요 기능
1. **사건 파일 생성**
    - AI가 사건 시나리오를 생성
    - 포함 요소: 
        - 사건 개요: 사건명, 범행 시간, 범행 장소, 범행 유형, 피해자
        - 신문 기사: 기사 제목, 기사 내용(사건 개요 요약)
        - 증거물: 증거명, 발견 위치, 설명
        - 용의자: 이름, 관계, 알리바이, 의심점
        - 진실(AI 내부 참고용): 진짜 범인, 결정적 증거
2. **AI 채팅: 용의자/증인 대화 프롬프트 제작**
    - 증인: 사건 파일을 바탕으로 진실된 정보를 증언
    - 용의자: 사건 파일을 바탕으로 왜곡된 정보를 생성하여 진술
3. **플레이 규칙** 
    - 사건 종결 "미해결 엔딩"
        - 시간 제한 내에 맞추어야함
        - 범인 지목을 세 번 틀릴 경우 **패널티** 부여
            - 총 기회=3
            - 한 번 틀리면: 기회 -1
        - 엔딩 문구: "범인을 밝혀내지 못한 채 사건은 미궁으로 빠졌습니다"
    - 질문 제한
        - 증인에게 질문(hint처럼 사용)
        - 용의자에게 질문(제한 없음)
    - 증인/용의자와의 대화를 통해 발언의 모순을 근거로 분석
4. **결정**
    - 플레이어는 단서를 통해 용의자에게 질문을 유도
    - 진실을 추론하고 범인을 특정
    - 올바른 추리 시 사건 해결
    - ✨(범인 후보 점수화 -> 변화 시각화)✨

### 기술 
- 사건 생성/채팅 기능: 'EEVE-Korean-10.8B'
- 증거물 이미지 생성: 

### Streamlit
- 사건 소개 페이지: 사건 선택 | 사건 파일 및 신문 스크랩 확인
- 증거물 페이지: 증거물 정보 및 이미지 확인
- 심문 페이지: 용의자/증인과의 대화 | 대화를 통해 얻은 정보 요약
- 엔딩 페이지: 용의자 지목 후 결과 확인 

- AI로 캐릭터 생성

### 파일 구조
프로젝트/
├── data/
│   ├── case_file1.json
│   ├── case_file2.json
│   ├── case_file3.json
│   ├── case_file4.json
│   └── case_file5.json
└── streamlit/ 
    └── app.py

## 게임 설명


## 게임 규칙


## 트러블슈팅

- eeve 모델이 json형식을 일정하게 반환해주지 않고 줄바꿈, 쉼표 등을  잘못 반환하는 경우가 있음 
-> json.loads로 파싱하여 동일한 형식으로 변환

- 다섯개의 사건을 반환하도록 프롬프트에 작성한 결과 원하는 반환 결과를 얻지 못함 
-> 다섯개의 사건명이 있는 리스트를 for문으로 처리하여 모델을 다섯번 호출

- for문을 돌린 모델 출력 결과를 빈 리스트에 append()로 추가할 경우 딕셔너리 형식이 아닌 str 형식으로 저장됨 
-> 따라서 for문을 돌릴 때마다 출력 결과를 각각의 파일에 저장